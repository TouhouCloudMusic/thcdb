# Like and Favorite (喜欢与收藏) 模块

> **实现状态**: ❌ 未实现 | [查看路线图](../ROADMAP.md#like)

喜欢与收藏系统允许用户标记和保存感兴趣的内容，是用户互动的基础功能。

## 系统概述

系统分为两个独立但互补的功能：

- **喜欢 (Like)**: 轻量级快速标记，用于表达对内容的喜爱
- **收藏 (Favorite)**: 将内容添加到用户列表，用于长期保存和分类管理

## 喜欢系统

### UserLike 实体

用户喜欢记录包含：

- **用户**: 执行喜欢操作的用户
- **目标实体**: 被喜欢的实体类型和标识
- **时间**: 喜欢的时间

### 可喜欢的实体类型

- **Song**: 歌曲
- **Release**: 发行版本
- **Artist**: 艺人
- **Event**: 活动

每个用户对同一实体只能喜欢一次。

### 业务规则

- **一键操作**: 喜欢/取消喜欢是即时操作，无需确认
- **可统计**: 喜欢数量作为内容热度指标
- **可见性**: 用户的喜欢列表默认公开，可在设置中调整
- **无通知**: 被喜欢不产生通知（减少骚扰）

## 收藏系统

收藏功能复用现有的用户列表系统 (`user_list`)，提供更强大的管理能力。

### 与喜欢的区别

| 特性 | 喜欢 | 收藏 |
|------|------|------|
| 操作复杂度 | 一键操作 | 需选择目标列表 |
| 分类管理 | 不支持 | 支持多个列表 |
| 可见性控制 | 简单 | 每个列表独立控制 |
| 主要用途 | 表达喜爱 | 长期保存和整理 |

### 快捷收藏

为简化操作，可提供"快捷收藏"功能：

- 默认收藏列表：用户可设置一个默认列表
- 一键收藏：将内容添加到默认列表
- 选择列表：弹出列表选择器添加到指定列表

## 关联关系

### 与其他系统的集成

- **统计系统**: 喜欢数量用于热度排行
- **推荐系统**: 喜欢记录可用于个性化推荐（未来扩展）
- **用户资料**: 显示用户的喜欢数量和列表

## 隐私设置

### 喜欢可见性

- **公开**: 所有人可见（默认）
- **仅关注者**: 仅关注者可见
- **私密**: 仅自己可见

### 收藏可见性

由各用户列表的 `is_public` 字段控制。

## API 端点 (待实现)

### 喜欢操作

| 端点 | 方法 | 说明 |
|------|------|------|
| `/{entity_type}/{id}/like` | POST | 喜欢 |
| `/{entity_type}/{id}/unlike` | POST | 取消喜欢 |
| `/{entity_type}/{id}/like-status` | GET | 喜欢状态 |
| `/{entity_type}/{id}/like-count` | GET | 喜欢数量 |

### 用户喜欢列表

| 端点 | 方法 | 说明 |
|------|------|------|
| `/user/{id}/likes` | GET | 用户喜欢列表 |
| `/user/{id}/likes/{entity_type}` | GET | 按类型筛选 |
